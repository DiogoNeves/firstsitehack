<!DOCTYPE html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8" />

	<!-- Set the viewport width to device width for mobile -->
	<meta name="viewport" content="width=device-width" />

	<title>Welcome to Foundation</title>
  
	<!-- Included CSS Files -->
	<link rel="stylesheet" href="stylesheets/foundation.css">
	<link rel="stylesheet" href="stylesheets/app.css">
	<link rel="stylesheet" href="stylesheets/jquery.Jcrop.css" type="text/css" />

	<!--[if lt IE 9]>
		<link rel="stylesheet" href="stylesheets/ie.css">
	<![endif]-->
	
	<script src="javascripts/modernizr.foundation.js"></script>

	<!-- IE Fix for HTML5 Tags -->
	<!--[if lt IE 9]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

</head>
<body>

	<p>Drop an image</p>
	<table>
      <tr>
        <td>
          <img src="pool.jpg" id="target" alt="Flowers" />
        </td>
        <td>
          <div style="width:100px;height:100px;overflow:hidden;">
            <img src="pool.jpg" id="preview" alt="Preview" class="jcrop-preview" />
          </div>
        </td>
      </tr>
    </table>

	<!-- Included JS Files -->
	<script src="javascripts/jquery.min.js"></script>
	<script src="javascripts/foundation.js"></script>
	<script src="javascripts/app.js"></script>
	<script src="javascripts/jquery.min.js"></script>
	<script src="javascripts/jquery.Jcrop.min.js"></script>

	<script type="text/javascript">
		jQuery(function($){

			//
			// CROPPING CODE
			//

			// Create variables (in this scope) to hold the API and image size
			var jcrop_api, boundx, boundy;

			$('#target').Jcrop({
				onChange: updatePreview,
				onSelect: updatePreview,
				aspectRatio: 1
			},function(){

				// Use the API to get the real image size
				var bounds = this.getBounds();
				boundx = bounds[0];
				boundy = bounds[1];
				// Store the API in the jcrop_api variable
				jcrop_api = this;
			});

			function updatePreview(c)
			{
				if (parseInt(c.w) > 0)
				{
					var rx = 100 / c.w;
					var ry = 100 / c.h;

					$('#preview').css({
						width: Math.round(rx * boundx) + 'px',
						height: Math.round(ry * boundy) + 'px',
						marginLeft: '-' + Math.round(rx * c.x) + 'px',
						marginTop: '-' + Math.round(ry * c.y) + 'px'
					});
				}
			};

			//
			// END OF CROPPING CODE
			//

		});
	</script>

</body>
</html>
